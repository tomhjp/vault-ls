<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <script src="wasm_exec.js"></script>
    </head>

    <body>
        <script>
            // Polyfill for older browsers that don't support streaming
            if (!WebAssembly.instantiateStreaming) {
                WebAssembly.instantiateStreaming = async (resp, importObject) => {
                    const source = await (await resp).arrayBuffer()
                    return await WebAssembly.instantiate(source, importObject)
                }
            }

            function loadGolangWASM(path) {
                const go = new Go()
                return new Promise((resolve, reject) => {
                WebAssembly.instantiateStreaming(fetch(path), go.importObject)
                    .then(result => {
                        go.run(result.instance)
                        resolve(result.instance)
                    })
                    .catch(error => {
                        reject(error)
                    })
                })
            }
        </script>
        <div style="width:80vw;min-height:80vh;margin:40px;font-family:'Segoe UI','Open Sans',Calibri,Candara,Arial,sans-serif">
            <h3>Vault Agent Config Editor</h3>
            <span style="float: right;">
                Theme:
                <select id="themeselect">
                    <option>vs</option>
                    <option>vs-dark</option>
                </select>
            </span>
            <!--<script src="main.bundle.js"></script>-->
            <script type="module" src="./main.ts"></script>
            <div id="container" style="width:100%;min-height:70vh;border:1px solid grey;margin-top:40px"></div>
        </div>
    </body>
</html>
